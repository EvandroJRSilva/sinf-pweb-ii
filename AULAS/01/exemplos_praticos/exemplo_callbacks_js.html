<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo: Callbacks em JavaScript</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2D3E50;
            border-bottom: 2px solid #F39C12;
            padding-bottom: 10px;
        }
        .info {
            background-color: #e8f4fd;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        button {
            background-color: #F39C12;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #E67E22;
        }
        .result {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            min-height: 50px;
        }
        .example-section {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background-color: #fafafa;
        }
        pre {
            background-color: #2D3E50;
            color: #ECF0F1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .comment {
            color: #7FB3D5;
            font-style: italic;
        }
        .keyword {
            color: #E74C3C;
        }
        .string {
            color: #2ECC71;
        }
        .function {
            color: #F39C12;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Exemplo Pr√°tico: Callbacks em JavaScript</h1>
        
        <div class="info">
            <strong>üí° Conceito:</strong> Callbacks s√£o fun√ß√µes passadas como argumentos para outras fun√ß√µes, que s√£o executadas em um momento espec√≠fico (geralmente ap√≥s uma opera√ß√£o ass√≠ncrona ser conclu√≠da).
        </div>
        
        <div class="example-section">
            <h2>Exemplo 1: Callback Simples</h2>
            <p>Este exemplo mostra como uma fun√ß√£o pode receber outra fun√ß√£o como par√¢metro e execut√°-la:</p>
            
            <pre><code><span class="comment">// Fun√ß√£o que recebe um callback</span>
<span class="keyword">function</span> <span class="function">cumprimentar</span>(nome, callback) {
    <span class="keyword">const</span> mensagem = <span class="string">`Ol√°, ${nome}!`</span>;
    console.log(mensagem);
    
    <span class="comment">// Executa o callback passando a mensagem</span>
    <span class="keyword">if</span> (callback && <span class="keyword">typeof</span> callback === <span class="string">'function'</span>) {
        callback(mensagem);
    }
}

<span class="comment">// Fun√ß√£o callback que ser√° executada</span>
<span class="keyword">function</span> <span class="function">mostrarAlerta</span>(mensagem) {
    alert(<span class="string">`Callback executado: ${mensagem}`</span>);
}

<span class="comment">// Chamando a fun√ß√£o com callback</span>
cumprimentar(<span class="string">'Maria'</span>, mostrarAlerta);</code></pre>
            
            <button onclick="exemploCallback1()">Executar Exemplo 1</button>
            <div id="resultado1" class="result"></div>
        </div>
        
        <div class="example-section">
            <h2>Exemplo 2: Callback com Opera√ß√£o Ass√≠ncrona</h2>
            <p>Este exemplo simula uma opera√ß√£o que demora um tempo para ser conclu√≠da:</p>
            
            <pre><code><span class="comment">// Simula uma opera√ß√£o ass√≠ncrona (ex: buscar dados do servidor)</span>
<span class="keyword">function</span> <span class="function">buscarDados</span>(callback) {
    console.log(<span class="string">'Iniciando busca de dados...'</span>);
    
    <span class="comment">// setTimeout simula uma opera√ß√£o que demora 2 segundos</span>
    setTimeout(<span class="keyword">function</span>() {
        <span class="keyword">const</span> dados = {
            id: 1,
            nome: <span class="string">'Jo√£o Silva'</span>,
            email: <span class="string">'joao@email.com'</span>
        };
        
        <span class="comment">// Chama o callback quando os dados est√£o prontos</span>
        callback(<span class="keyword">null</span>, dados); <span class="comment">// null = sem erro, dados = resultado</span>
    }, 2000);
}

<span class="comment">// Callback para processar os dados recebidos</span>
<span class="keyword">function</span> <span class="function">processarDados</span>(erro, dados) {
    <span class="keyword">if</span> (erro) {
        console.error(<span class="string">'Erro:'</span>, erro);
        <span class="keyword">return</span>;
    }
    
    console.log(<span class="string">'Dados recebidos:'</span>, dados);
    <span class="comment">// Aqui voc√™ processaria os dados...</span>
}</code></pre>
            
            <button onclick="exemploCallback2()">Executar Exemplo 2</button>
            <div id="resultado2" class="result"></div>
            <div id="log2" class="log"></div>
        </div>
        
        <div class="example-section">
            <h2>Exemplo 3: M√∫ltiplos Callbacks</h2>
            <p>Este exemplo mostra como usar diferentes callbacks para diferentes situa√ß√µes:</p>
            
            <pre><code><span class="comment">// Fun√ß√£o que pode ter sucesso ou falha</span>
<span class="keyword">function</span> <span class="function">operacaoComRisco</span>(sucesso, onSuccess, onError) {
    console.log(<span class="string">'Executando opera√ß√£o...'</span>);
    
    setTimeout(<span class="keyword">function</span>() {
        <span class="keyword">if</span> (sucesso) {
            onSuccess(<span class="string">'Opera√ß√£o conclu√≠da com sucesso!'</span>);
        } <span class="keyword">else</span> {
            onError(<span class="string">'Algo deu errado na opera√ß√£o!'</span>);
        }
    }, 1500);
}

<span class="comment">// Callbacks para diferentes cen√°rios</span>
<span class="keyword">function</span> <span class="function">callbackSucesso</span>(mensagem) {
    console.log(<span class="string">'‚úÖ Sucesso:'</span>, mensagem);
}

<span class="keyword">function</span> <span class="function">callbackErro</span>(mensagem) {
    console.log(<span class="string">'‚ùå Erro:'</span>, mensagem);
}</code></pre>
            
            <button onclick="exemploCallback3(true)">Simular Sucesso</button>
            <button onclick="exemploCallback3(false)">Simular Erro</button>
            <div id="resultado3" class="result"></div>
            <div id="log3" class="log"></div>
        </div>
        
        <div class="example-section">
            <h2>Exemplo 4: Callback Hell (Problema)</h2>
            <p>Este exemplo mostra o problema do "Callback Hell" - quando temos muitos callbacks aninhados:</p>
            
            <pre><code><span class="comment">// Exemplo de Callback Hell (evitar!)</span>
<span class="keyword">function</span> <span class="function">exemploCallbackHell</span>() {
    console.log(<span class="string">'Iniciando sequ√™ncia de opera√ß√µes...'</span>);
    
    <span class="function">operacao1</span>(<span class="keyword">function</span>(resultado1) {
        console.log(<span class="string">'Opera√ß√£o 1 conclu√≠da:'</span>, resultado1);
        
        <span class="function">operacao2</span>(resultado1, <span class="keyword">function</span>(resultado2) {
            console.log(<span class="string">'Opera√ß√£o 2 conclu√≠da:'</span>, resultado2);
            
            <span class="function">operacao3</span>(resultado2, <span class="keyword">function</span>(resultado3) {
                console.log(<span class="string">'Opera√ß√£o 3 conclu√≠da:'</span>, resultado3);
                console.log(<span class="string">'Todas as opera√ß√µes conclu√≠das!'</span>);
            });
        });
    });
}</code></pre>
            
            <button onclick="exemploCallbackHell()">Demonstrar Callback Hell</button>
            <div id="resultado4" class="result"></div>
            <div id="log4" class="log"></div>
        </div>
        
        <h2>Vantagens e Desvantagens dos Callbacks:</h2>
        <div style="display: flex; gap: 20px;">
            <div style="flex: 1; background-color: #d4edda; padding: 15px; border-radius: 5px;">
                <h3 style="color: #155724;">‚úÖ Vantagens</h3>
                <ul>
                    <li>Permitem opera√ß√µes ass√≠ncronas</li>
                    <li>Flexibilidade na execu√ß√£o</li>
                    <li>Reutiliza√ß√£o de c√≥digo</li>
                    <li>Controle do fluxo de execu√ß√£o</li>
                </ul>
            </div>
            <div style="flex: 1; background-color: #f8d7da; padding: 15px; border-radius: 5px;">
                <h3 style="color: #721c24;">‚ùå Desvantagens</h3>
                <ul>
                    <li>Callback Hell (aninhamento excessivo)</li>
                    <li>Dificuldade de leitura e manuten√ß√£o</li>
                    <li>Tratamento de erros complexo</li>
                    <li>Debugging mais dif√≠cil</li>
                </ul>
            </div>
        </div>
        
        <div class="info" style="margin-top: 20px;">
            <strong>üí° Evolu√ß√£o:</strong> Para resolver os problemas dos callbacks, foram criadas as <strong>Promises</strong> e posteriormente <strong>async/await</strong>, que oferecem uma sintaxe mais limpa para opera√ß√µes ass√≠ncronas.
        </div>
    </div>

    <script>
        // Exemplo 1: Callback Simples
        function cumprimentar(nome, callback) {
            const mensagem = `Ol√°, ${nome}!`;
            console.log(mensagem);
            
            if (callback && typeof callback === 'function') {
                callback(mensagem);
            }
            
            return mensagem;
        }

        function mostrarAlerta(mensagem) {
            alert(`Callback executado: ${mensagem}`);
        }

        function exemploCallback1() {
            const resultado = document.getElementById('resultado1');
            resultado.innerHTML = '<p>Executando exemplo 1...</p>';
            
            const mensagem = cumprimentar('Maria', function(msg) {
                resultado.innerHTML = `<p><strong>Resultado:</strong> ${msg}</p><p><em>O callback foi executado e mostrou um alerta!</em></p>`;
            });
        }

        // Exemplo 2: Callback com Opera√ß√£o Ass√≠ncrona
        function buscarDados(callback) {
            const log = document.getElementById('log2');
            log.textContent += 'Iniciando busca de dados...\n';
            
            setTimeout(function() {
                const dados = {
                    id: 1,
                    nome: 'Jo√£o Silva',
                    email: 'joao@email.com'
                };
                
                callback(null, dados);
            }, 2000);
        }

        function processarDados(erro, dados) {
            const resultado = document.getElementById('resultado2');
            const log = document.getElementById('log2');
            
            if (erro) {
                log.textContent += `Erro: ${erro}\n`;
                resultado.innerHTML = '<p style="color: red;">‚ùå Erro no processamento!</p>';
                return;
            }
            
            log.textContent += `Dados recebidos: ${JSON.stringify(dados)}\n`;
            resultado.innerHTML = `
                <h4>‚úÖ Dados processados com sucesso!</h4>
                <p><strong>ID:</strong> ${dados.id}</p>
                <p><strong>Nome:</strong> ${dados.nome}</p>
                <p><strong>Email:</strong> ${dados.email}</p>
            `;
        }

        function exemploCallback2() {
            const resultado = document.getElementById('resultado2');
            const log = document.getElementById('log2');
            
            resultado.innerHTML = '<p class="loading">Aguardando dados... (2 segundos)</p>';
            log.textContent = '';
            
            buscarDados(processarDados);
        }

        // Exemplo 3: M√∫ltiplos Callbacks
        function operacaoComRisco(sucesso, onSuccess, onError) {
            const log = document.getElementById('log3');
            log.textContent += 'Executando opera√ß√£o...\n';
            
            setTimeout(function() {
                if (sucesso) {
                    onSuccess('Opera√ß√£o conclu√≠da com sucesso!');
                } else {
                    onError('Algo deu errado na opera√ß√£o!');
                }
            }, 1500);
        }

        function callbackSucesso(mensagem) {
            const resultado = document.getElementById('resultado3');
            const log = document.getElementById('log3');
            
            log.textContent += `‚úÖ Sucesso: ${mensagem}\n`;
            resultado.innerHTML = `<p style="color: green;"><strong>‚úÖ ${mensagem}</strong></p>`;
        }

        function callbackErro(mensagem) {
            const resultado = document.getElementById('resultado3');
            const log = document.getElementById('log3');
            
            log.textContent += `‚ùå Erro: ${mensagem}\n`;
            resultado.innerHTML = `<p style="color: red;"><strong>‚ùå ${mensagem}</strong></p>`;
        }

        function exemploCallback3(sucesso) {
            const resultado = document.getElementById('resultado3');
            const log = document.getElementById('log3');
            
            resultado.innerHTML = '<p class="loading">Executando opera√ß√£o... (1.5 segundos)</p>';
            log.textContent = '';
            
            operacaoComRisco(sucesso, callbackSucesso, callbackErro);
        }

        // Exemplo 4: Callback Hell
        function operacao1(callback) {
            setTimeout(() => {
                callback('Resultado da opera√ß√£o 1');
            }, 500);
        }

        function operacao2(entrada, callback) {
            setTimeout(() => {
                callback(`${entrada} + Resultado da opera√ß√£o 2`);
            }, 500);
        }

        function operacao3(entrada, callback) {
            setTimeout(() => {
                callback(`${entrada} + Resultado da opera√ß√£o 3`);
            }, 500);
        }

        function exemploCallbackHell() {
            const resultado = document.getElementById('resultado4');
            const log = document.getElementById('log4');
            
            resultado.innerHTML = '<p class="loading">Executando sequ√™ncia de opera√ß√µes...</p>';
            log.textContent = 'Iniciando sequ√™ncia de opera√ß√µes...\n';
            
            operacao1(function(resultado1) {
                log.textContent += `Opera√ß√£o 1 conclu√≠da: ${resultado1}\n`;
                
                operacao2(resultado1, function(resultado2) {
                    log.textContent += `Opera√ß√£o 2 conclu√≠da: ${resultado2}\n`;
                    
                    operacao3(resultado2, function(resultado3) {
                        log.textContent += `Opera√ß√£o 3 conclu√≠da: ${resultado3}\n`;
                        log.textContent += 'Todas as opera√ß√µes conclu√≠das!\n';
                        
                        resultado.innerHTML = `
                            <h4>‚úÖ Sequ√™ncia conclu√≠da!</h4>
                            <p><strong>Resultado final:</strong> ${resultado3}</p>
                            <p><em>Note como o c√≥digo fica "aninhado" (Callback Hell)</em></p>
                        `;
                    });
                });
            });
        }
    </script>
</body>
</html>

