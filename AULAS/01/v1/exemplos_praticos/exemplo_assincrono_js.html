<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo: Requisição Assíncrona em JavaScript</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2D3E50;
            border-bottom: 2px solid #E74C3C;
            padding-bottom: 10px;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        button {
            background-color: #E74C3C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #C0392B;
        }
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        .result {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            min-height: 50px;
        }
        .loading {
            color: #e67e22;
            font-weight: bold;
        }
        .click-counter {
            background-color: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }
        pre {
            background-color: #2D3E50;
            color: #ECF0F1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .comment {
            color: #7FB3D5;
            font-style: italic;
        }
        .keyword {
            color: #E74C3C;
        }
        .string {
            color: #2ECC71;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Exemplo Prático: Requisição Assíncrona em JavaScript</h1>
        
        <div class="success">
            <strong>✅ Boa Prática:</strong> Este exemplo demonstra uma requisição assíncrona, que é a forma recomendada de fazer requisições HTTP em aplicações web modernas, pois não bloqueia a interface do usuário.
        </div>
        
        <h2>Como funciona:</h2>
        <p>Quando você clicar no botão abaixo, o navegador fará uma requisição assíncrona para uma API pública. Durante esse tempo, a interface continuará responsiva e você poderá interagir normalmente com a página.</p>
        
        <button onclick="exemploAssincrono()">Fazer Requisição Assíncrona</button>
        <button onclick="incrementarContador()">Clique Aqui Durante a Requisição</button>
        
        <div class="click-counter">
            Cliques durante requisições: <span id="contador">0</span>
        </div>
        
        <div id="resultado" class="result">
            <p>Clique no botão acima para ver o resultado...</p>
        </div>
        
        <h2>Código do Exemplo:</h2>
        <pre><code><span class="comment">// Exemplo 1: Usando fetch() com Promises</span>
<span class="keyword">function</span> exemploAssincrono() {
    <span class="keyword">const</span> resultado = document.getElementById(<span class="string">'resultado'</span>);
    
    <span class="comment">// Mostra status de carregamento</span>
    resultado.innerHTML = <span class="string">'&lt;p class="loading"&gt;Fazendo requisição assíncrona... A interface continua responsiva!&lt;/p&gt;'</span>;
    
    <span class="comment">// fetch() retorna uma Promise (não bloqueia)</span>
    fetch(<span class="string">'https://jsonplaceholder.typicode.com/posts/1'</span>)
        .then(response => {
            <span class="keyword">if</span> (!response.ok) {
                <span class="keyword">throw new</span> Error(<span class="string">'Erro na requisição: '</span> + response.status);
            }
            <span class="keyword">return</span> response.json();
        })
        .then(dados => {
            <span class="comment">// Este código executa quando a resposta chegar</span>
            resultado.innerHTML = <span class="string">`
                &lt;h3&gt;✅ Requisição concluída!&lt;/h3&gt;
                &lt;p&gt;&lt;strong&gt;Título:&lt;/strong&gt; ${dados.title}&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;Conteúdo:&lt;/strong&gt; ${dados.body}&lt;/p&gt;
                &lt;p&gt;&lt;em&gt;A interface permaneceu responsiva durante toda a requisição!&lt;/em&gt;&lt;/p&gt;
            `</span>;
        })
        .catch(error => {
            resultado.innerHTML = <span class="string">'&lt;p style="color: red;"&gt;❌ Erro: '</span> + error.message + <span class="string">'&lt;/p&gt;'</span>;
        });
}

<span class="comment">// Exemplo 2: Usando async/await (sintaxe mais limpa)</span>
<span class="keyword">async function</span> exemploAsyncAwait() {
    <span class="keyword">const</span> resultado = document.getElementById(<span class="string">'resultado'</span>);
    
    <span class="keyword">try</span> {
        resultado.innerHTML = <span class="string">'&lt;p class="loading"&gt;Carregando com async/await...&lt;/p&gt;'</span>;
        
        <span class="comment">// await pausa a função, mas não bloqueia a interface</span>
        <span class="keyword">const</span> response = <span class="keyword">await</span> fetch(<span class="string">'https://jsonplaceholder.typicode.com/posts/2'</span>);
        
        <span class="keyword">if</span> (!response.ok) {
            <span class="keyword">throw new</span> Error(<span class="string">'Erro na requisição'</span>);
        }
        
        <span class="keyword">const</span> dados = <span class="keyword">await</span> response.json();
        
        resultado.innerHTML = <span class="string">`
            &lt;h3&gt;✅ Async/Await concluído!&lt;/h3&gt;
            &lt;p&gt;&lt;strong&gt;Título:&lt;/strong&gt; ${dados.title}&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Conteúdo:&lt;/strong&gt; ${dados.body}&lt;/p&gt;
        `</span>;
    } <span class="keyword">catch</span> (error) {
        resultado.innerHTML = <span class="string">'&lt;p style="color: red;"&gt;❌ Erro: '</span> + error.message + <span class="string">'&lt;/p&gt;'</span>;
    }
}</code></pre>
        
        <button onclick="exemploAsyncAwait()">Exemplo com Async/Await</button>
        
        <h2>Vantagens das Requisições Assíncronas:</h2>
        <ul>
            <li><strong>Interface Responsiva:</strong> O usuário pode continuar interagindo com a página durante a requisição.</li>
            <li><strong>Melhor Experiência:</strong> Não há "travamentos" ou sensação de aplicação lenta.</li>
            <li><strong>Múltiplas Requisições:</strong> Possibilidade de fazer várias requisições simultaneamente.</li>
            <li><strong>Callbacks/Promises:</strong> Permite definir o que fazer quando a resposta chegar.</li>
        </ul>
        
        <h2>Comparação com Requisições Síncronas:</h2>
        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <tr style="background-color: #f8f9fa;">
                <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Aspecto</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Síncrona</th>
                <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Assíncrona</th>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 12px;">Interface</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #e74c3c;">❌ Bloqueada</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #27ae60;">✅ Responsiva</td>
            </tr>
            <tr style="background-color: #f8f9fa;">
                <td style="border: 1px solid #ddd; padding: 12px;">Experiência do Usuário</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #e74c3c;">❌ Ruim</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #27ae60;">✅ Boa</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 12px;">Múltiplas Requisições</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #e74c3c;">❌ Difícil</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #27ae60;">✅ Fácil</td>
            </tr>
            <tr style="background-color: #f8f9fa;">
                <td style="border: 1px solid #ddd; padding: 12px;">Uso Recomendado</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #e74c3c;">❌ Evitar</td>
                <td style="border: 1px solid #ddd; padding: 12px; color: #27ae60;">✅ Preferir</td>
            </tr>
        </table>
    </div>

    <script>
        let contador = 0;

        // Função que demonstra requisição assíncrona (NÃO-BLOQUEANTE)
        function exemploAssincrono() {
            const resultado = document.getElementById('resultado');
            
            // Mostra status de carregamento
            resultado.innerHTML = '<p class="loading">Fazendo requisição assíncrona... A interface continua responsiva!</p>';
            
            // fetch() retorna uma Promise (não bloqueia)
            fetch('https://jsonplaceholder.typicode.com/posts/1')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro na requisição: ' + response.status);
                    }
                    return response.json();
                })
                .then(dados => {
                    // Este código executa quando a resposta chegar
                    resultado.innerHTML = `
                        <h3>✅ Requisição concluída!</h3>
                        <p><strong>Título:</strong> ${dados.title}</p>
                        <p><strong>Conteúdo:</strong> ${dados.body}</p>
                        <p><em>A interface permaneceu responsiva durante toda a requisição!</em></p>
                    `;
                })
                .catch(error => {
                    resultado.innerHTML = '<p style="color: red;">❌ Erro: ' + error.message + '</p>';
                });
        }

        // Exemplo usando async/await
        async function exemploAsyncAwait() {
            const resultado = document.getElementById('resultado');
            
            try {
                resultado.innerHTML = '<p class="loading">Carregando com async/await...</p>';
                
                // await pausa a função, mas não bloqueia a interface
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/2');
                
                if (!response.ok) {
                    throw new Error('Erro na requisição');
                }
                
                const dados = await response.json();
                
                resultado.innerHTML = `
                    <h3>✅ Async/Await concluído!</h3>
                    <p><strong>Título:</strong> ${dados.title}</p>
                    <p><strong>Conteúdo:</strong> ${dados.body}</p>
                `;
            } catch (error) {
                resultado.innerHTML = '<p style="color: red;">❌ Erro: ' + error.message + '</p>';
            }
        }

        // Função para demonstrar que a interface continua responsiva
        function incrementarContador() {
            contador++;
            document.getElementById('contador').textContent = contador;
        }
    </script>
</body>
</html>

